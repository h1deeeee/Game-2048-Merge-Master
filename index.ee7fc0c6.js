var i,e=function(){var i;function e(){!function(i,e){if(!(i instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.grid=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.updateScore(),this.addNumber(),this.addNumber()}return i=[{key:"addNumber",value:function(){for(var i,e,t,s=0,h=[],a=0;a<this.grid.length;a++)for(var n=0;n<this.grid[a].length;n++)0===this.grid[a][n]&&(s++,h[0]=[a,n]);if(s>1){do e=Math.floor((i=Math.floor(15*Math.random())+0)/4),t=r();while(0!==this.grid[e][i%4])this.grid[e][i%4]=t,this.updateGrid()}1===s?(this.grid[h[0][0]][h[0][1]]=r(),this.updateGrid()):this.checkGameStatus()}},{key:"copyGrid",value:function(){return this.grid.map(function(i){return i.slice()})}},{key:"isGridEqual",value:function(i,e){for(var t=0;t<i.length;t++)for(var r=0;r<i[t].length;r++)if(i[t][r]!==e[t][r])return!1;return!0}},{key:"action",value:function(i){var e=this.copyGrid();this.move(i),this.mergeNumber(i);var t=!this.isGridEqual(e,this.grid);this.updateScore(),this.move(i),t&&this.addNumber(),this.checkGameStatus()}},{key:"move",value:function(i){switch(!0){case"up"===i:this.moveUp();break;case"down"===i:this.moveDown();break;case"left"===i:this.moveLeft();break;case"right"===i:this.moveRight()}}},{key:"mergeNumber",value:function(i){switch(!0){case"up"===i:this.mergeUp();break;case"down"===i:this.mergeDown();break;case"left"===i:this.mergeLeft();break;case"right"===i:this.mergeRight()}}},{key:"updateGrid",value:function(){for(var i=0;i<this.grid.length;i++)for(var e=0;e<this.grid[i].length;e++){var t=this.grid[i][e],r="field-cell-".concat(4*i+e),s=document.getElementById(r);s.className="field-cell",0!==t?(s.classList.add("field-cell--".concat(t)),s.innerText=t):s.innerText=""}}},{key:"updateScore",value:function(){document.getElementById("game-score").innerText=this.score}},{key:"mergeRight",value:function(){for(var i=0;i<this.grid.length;i++)for(var e=this.grid[i].length-1;e>=0;e--)0!==this.grid[i][e]&&this.grid[i][e]===this.grid[i][e-1]&&(this.grid[i][e]*=2,this.grid[i][e-1]=0,this.score+=this.grid[i][e]);this.updateGrid()}},{key:"mergeLeft",value:function(){for(var i=0;i<this.grid.length;i++)for(var e=0;e<=this.grid[i].length-1;e++)0!==this.grid[i][e]&&this.grid[i][e]===this.grid[i][e+1]&&(this.grid[i][e]*=2,this.grid[i][e+1]=0,this.score+=this.grid[i][e]);this.updateGrid()}},{key:"mergeDown",value:function(){for(var i=this.grid.length-1;i>=1;i--)for(var e=0;e<this.grid[i].length;e++)0!==this.grid[i][e]&&this.grid[i][e]===this.grid[i-1][e]&&(this.grid[i][e]*=2,this.grid[i-1][e]=0,this.score+=this.grid[i][e]);this.updateGrid()}},{key:"mergeUp",value:function(){for(var i=0;i<this.grid.length-1;i++)for(var e=0;e<this.grid[i].length;e++)0!==this.grid[i][e]&&this.grid[i][e]===this.grid[i+1][e]&&(this.grid[i][e]*=2,this.grid[i+1][e]=0,this.score+=this.grid[i][e]);this.updateGrid()}},{key:"moveUp",value:function(){for(var i=0;i<this.grid[0].length;i++)for(var e=1;e<this.grid.length;e++)if(0!==this.grid[e][i])for(var t=e;t>0&&0===this.grid[t-1][i];t--)this.grid[t-1][i]=this.grid[t][i],this.grid[t][i]=0}},{key:"moveDown",value:function(){for(var i=0;i<this.grid[0].length;i++)for(var e=this.grid.length-2;e>=0;e--)if(0!==this.grid[e][i])for(var t=e;t<this.grid.length-1&&0===this.grid[t+1][i];t++)this.grid[t+1][i]=this.grid[t][i],this.grid[t][i]=0}},{key:"moveLeft",value:function(){for(var i=0;i<this.grid.length;i++)for(var e=1;e<this.grid.length;e++)if(0!==this.grid[i][e])for(var t=e;t>0&&0===this.grid[i][t-1];t--)this.grid[i][t-1]=this.grid[i][t],this.grid[i][t]=0}},{key:"moveRight",value:function(){for(var i=0;i<this.grid.length;i++)for(var e=this.grid.length-2;e>=0;e--)if(0!==this.grid[i][e])for(var t=e;t<this.grid.length-1&&0===this.grid[i][t+1];t++)this.grid[i][t+1]=this.grid[i][t],this.grid[i][t]=0}},{key:"checkGameStatus",value:function(){if(this.grid.flat().includes(2048)){var i=document.querySelector(".message-win");this.hideMessage(),i.classList.remove("hidden")}else if(!this.areMovesAvailable()){var e=document.querySelector(".message-lose");this.hideMessage(),e.classList.remove("hidden")}}},{key:"areMovesAvailable",value:function(){var i=!0,e=!1,t=void 0;try{for(var r,s=this.grid[Symbol.iterator]();!(i=(r=s.next()).done);i=!0)if(r.value.includes(0))return!0}catch(i){e=!0,t=i}finally{try{i||null==s.return||s.return()}finally{if(e)throw t}}for(var h=0;h<this.grid.length;h++)for(var a=0;a<this.grid[h].length-1;a++){var n=this.grid[h][a]===this.grid[h][a+1],d=this.grid[a][h]===this.grid[a+1][h];if(n||d)return!0}return!1}},{key:"hideMessage",value:function(){for(var i=[document.querySelector(".message-win"),document.querySelector(".message-start"),document.querySelector(".message-lose")],e=0;e<i.length;e++)i[e].classList.contains("hidden")||i[e].classList.add("hidden")}}],function(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}(e.prototype,i),e}(),t=document.getElementById("button-start");function r(){return Math.floor(10*Math.random())+1<=9?2:4}t.addEventListener("click",function(){(i=new e).hideMessage(),t.classList.remove("start"),t.classList.add("restart"),t.innerText="Restart"}),document.addEventListener("keydown",function(e){switch(!0){case"ArrowUp"===e.key:i.action("up");break;case"ArrowDown"===e.key:i.action("down");break;case"ArrowLeft"===e.key:i.action("left");break;case"ArrowRight"===e.key:i.action("right")}});
//# sourceMappingURL=index.ee7fc0c6.js.map
